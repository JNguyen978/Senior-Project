<?PHP
$server = "localhost";
$username = "S0245819";
$password = "Nguyen1992";
$database = "S0245819";

$db = new mysqli($server,$username,$password,$database);
if ($db -> connect_error) die ("Connection Failed");
	//echo "Connected ";
	
//mysqli_select_db($db, "NarakaPain");
$spells = array (
'19920510','74079156','21456134','73759236','26251353','22411242','68401488','41258646','73469341','446965',
'31113559','30046300','7250','43230548','59189004','22707996','75900909','22015124','82779249','80301228',
'27282584','22059766','28650045','55818944','193759','19839806','67111983','27519370','25349772','19738326',
'20006875','41216897','65389099','44989337','492066','77179274','51405','37931849','41233933','83089576',
'25232745','82149286','20533841','35017400','38038926','32932398','42815012','19770082','21367804','83039128',
'32672912','80659088','579475','581716','20577176','32392626','78639217','78771213','20132258','44989342',
'51972895','76821323','79929174','5908','242637','22701102','50539313','21557951','19698094','73759389',
'71350797','22190313','48547745','78859792','22205540','42762376','70011915','46069412','20142680','28640725',
'42060215','40984753','51146953','19106536','22200455','52316360','21490433','68479082','60805480','24798779',
'21542029','81300025','83039481','20653223','35317527','52372786','19887289','66879182','76379684','77371699',
'36393971','23353829','36119978','29431520','57039082','68603405','37827053','77191631','64834040','21777057',
'30045762','83339085','83179090','20044486','21498922','34287847','56539172','40220617','21014987','79882258',
'82769263','21957142','22670229','41275742','20636732','29161654','22941674','20783487','30079','42092205',
'71229345','22544846','22478453','22403576','30266347','2648','34270960','20082683','25005620','28501315',
'77211676','28906668','37532228','22220672','22220672','20112175','22141445','77351819','10077','23245665',
'22325691','19967304','23358998','76631430','38880034','21351258','38809624','75871549','83089575','24425309',
'21312637','19806051','35592112','77779095','77392135','77012735','60329217','77520973','24550000','38354012',
'44159449','56149487','22696988','77750220','21472039','21955448','22588908','24934464','47473249','23338989',
'24597513','46091942','82469202','39996432','70423058','158975','27409706','35021069','28661557','37343071',
'20838359','20130821','77211704','37856607','48193601','21806931','401063','28993829','36400685','79049172');

	//echo $spells[]; 
	
for ($i = 0; $i<=199;$i++){
	
$RiotAPI = file_get_contents("https://na.api.riotgames.com/api/lol/na/v1.3/game/by-summoner/$spells[$i]/recent?api_key=RGAPI-9f105d8f-e469-4e5e-bf31-1d2be6fd6763");	
	//echo $RiotAPI;
$data = json_decode($RiotAPI, true);	
	//var_dump($data);

for ($x = 0; $x<=9;$x++){ // 10 games per player
	//for ($j = 0; $j<=0;$j++){ // the 9 players in each game
	
	

$gameId = $data["games"][$x]["gameId"];	  // WORKS
	//echo "gameId = ($gameId)";	
$championId = $data["games"][$x]['championId'];	  // WORKS
	//echo "championId = ($championId)";	
$summonerId = $data['summonerId'];  // WORKS
	//echo "summonerId = ($summonerId)";	
	

$item0 = $data["games"][$x]["stats"]['item0'];	
	//echo "item0 = ($item0)";	
$item1 = $data["games"][$x]["stats"]['item1'];	
	//echo "item1 = ($item1)";
$item2 = $data["games"][$x]["stats"]['item2'];	
	//echo "item2 = ($item2)";
$item3 = $data["games"][$x]["stats"]['item3'];	
	//echo "item3 = ($item3)";
$item4 = $data["games"][$x]["stats"]['item4'];	
	//echo "item4 = ($item4)";
$item5 = $data["games"][$x]["stats"]['item5'];	
	//echo "item5 = ($item5)";
$item6 = $data["games"][$x]["stats"]['item6'];	
	//echo "item6 = ($item6)";
	
$spell1 = $data["games"][$x]['spell1'];	 // WORKS
	//echo "spell1 = ($spell1)";
$spell2 = $data["games"][$x]['spell2'];	  // WORKS
	//echo "spell2 = ($spell2)";	


	
$stmt = $db->prepare("INSERT INTO PlayerStats(gameId, championId, summonerId, item0, item1, item2, item3, item4, item5, item6, spell1, spell2) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
$stmt->bind_param("ssssssssssss", $gameId, $championId, $summonerId, $item0, $item1, $item2, $item3, $item4, $item5, $item6, $spell1, $spell2);
$stmt->execute();	

echo $db->error;
		}
	}
//}
?>